<!DOCTYPE html>  <html> <head>   <title>simple.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="schema.html">                 schema.js               </a>                                           <a class="source" href="setters-and-getters.html">                 setters-and-getters.js               </a>                                           <a class="source" href="simple.html">                 simple.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               simple.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Examples of several common uses of the json-config package.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Load the package and create a new configuration object.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">Configuration</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../lib/json-config&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">conf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Configuration</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;New Configuration&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Merge an object into the configuration.  Configuration objects may have nested objects themselves. <br />
It's worth noting that all properties but functions will be preserved, including getters and setters.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
	<span class="s2">&quot;author&quot;</span><span class="o">:</span> <span class="p">{</span>
		<span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jeremy Fisher&quot;</span><span class="p">,</span>
		<span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;jeremy@rentawebgeek.com&quot;</span>
	<span class="p">}</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of merging an object&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Here, we show an example of merging configuration from an object that is JSON encoded in a string.
Remember that <code>JSON.parse()</code> wants member names to be surrounded in quotation marks (").</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="s1">&#39;{&quot;runInBackground&quot;: true}&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of merging from a string&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Obviously, it's useful to store configurations in a file.  Simply call <code>merge()</code> with a valid file path
to parse a JSON file (you can find this file in the source alongside these examples).  For convenience and 
sanity, JavaScript comments can be included in your configuration files.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s2">&quot;/settings.json&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of merging from a file&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Perhaps the simplest use is to assign (or read) a configuration value directly.  Again, getters and setters
are preserved through <code>merge()</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">hostname</span> <span class="o">=</span> <span class="s2">&quot;dev.localdomain&quot;</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of assigning a value&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>It is sometimes useful to assign a value to a deep object using dot notation (such as when parsing 
command-line arguments).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="s2">&quot;database.port&quot;</span><span class="p">,</span> <span class="mi">8098</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of assigning a value from a string key&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>For convenience, this helper method will pull configuration values from an array (like <code>process.argv</code>) using any flags
you provide.  In this case, we're using a simulated argv and looking for <code>-D key=value</code>.  The second arguments can
be an array, such as <code>["-D", "--directive"]</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">assignFromArguments</span><span class="p">([</span><span class="s2">&quot;-D&quot;</span><span class="p">,</span> <span class="s2">&quot;server.hostname=mysite.example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;extrastuff&quot;</span><span class="p">],</span> <span class="s2">&quot;-D&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of assigning values from example arguments&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>The <code>assignFromArguments()</code> method will default to <code>process.argv</code> and flags will default to <code>["-D", "--directive"]</code>. <br />
Try invoking this program with <code>-D &lt;key=value&gt;</code> or <code>--directive &lt;key=value&gt;</code> to see it in action.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">conf</span><span class="p">.</span><span class="nx">assignFromArguments</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Result of assigning values from argv&quot;</span><span class="p">,</span> <span class="nx">conf</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 